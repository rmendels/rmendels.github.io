<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Using plotdap • plotdap</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Using plotdap">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">plotdap</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/using_plotdap.html">Using plotdap</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ropensci/plotdap">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Using plotdap</h1>
            
            <h4 class="date">2020-01-09</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ropensci/plotdap/blob/master/vignettes/using_plotdap.Rmd"><code>vignettes/using_plotdap.Rmd</code></a></small>
      <div class="hidden name"><code>using_plotdap.Rmd</code></div>

    </div>

    
    
<div id="plotdap" class="section level1">
<h1 class="hasAnchor">
<a href="#plotdap" class="anchor"></a>plotdap</h1>
<p>The R package <strong>plotdap</strong> makes it easy to visualize ‘tabledap’ and ‘griddap’ objects obtained via the <a href="https://github.com/ropensci/rerddap"><strong>rerddap</strong></a> package. Maps can be made using either base or ggplot2 graphics, and the user does not need to know the intricacies of obtaining continental outlines, projections, and combining those with the data to form maps. Animations of the data are also readily obtained. <code>plotdap</code> works in a similar fashion with either tables or grids return by <code>rerddap</code> further simplifying the mapping process.</p>
<p>A user who desires fine control of their maps should learn how to map the data themselves - some examples are give in the <code>rerddap</code> vignette. But <code>plotdap</code> provides a simplified workflow of obtaining data using <code>rerddap</code> and quickly and simply mapping the data. In what follows we go over how to install <code>plotdap</code> and it’s basic usage, as well as how to utilize some of the more important options in the package in order to improve the map.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p><strong>plotdap</strong> can be installed from CRAN with:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="kw"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">"plotdap"</span>)</a></code></pre></div>
<p>and the development version can be installed with:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1">devtools<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/devtools/man/remote-reexports.html">install_github</a></span>(<span class="st">'ropensci/plotdap'</span>)</a></code></pre></div>
</div>
<div id="getting-started-with-plotdap" class="section level2">
<h2 class="hasAnchor">
<a href="#getting-started-with-plotdap" class="anchor"></a>Getting started with <code>plotdap()</code>
</h2>
<p>The <code>plotdap()</code> function makes it easy to visualize data acquired via <code><a href="https://docs.ropensci.org/rerddap/reference/tabledap.html">rerddap::tabledap()</a></code> or <code><a href="https://docs.ropensci.org/rerddap/reference/griddap.html">rerddap::griddap()</a></code>. Regardless of the data you want to visualize, you’ll always want to start a plot via <code>plotdap()</code>, where you may specify some “global” plotting options. Subsequent sections will demonstrate how to add tables/grids via <code><a href="../reference/add_tabledap.html">add_tabledap()</a></code>/<code><a href="../reference/add_griddap.html">add_griddap()</a></code>, but for now we’ll focus on options provided by <code>plotdap()</code>. Most importantly, the first argument decides whether <a href="https://stat.ethz.ch/R-manual/R-devel/library/graphics/html/plot.html">base</a> or <a href="https://cran.r-project.org/package=ggplot2">ggplot2</a> graphics should be used for the actual plotting.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(plotdap)</a>
<a class="sourceLine" id="cb3-2" title="2"><span class="kw">plotdap</span>()</a></code></pre></div>
<p><img src="using_plotdap_files/figure-html/world-1.png" width="480" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1"><span class="kw">plotdap</span>(<span class="st">"base"</span>)</a></code></pre></div>
<p><img src="using_plotdap_files/figure-html/world-2.png" width="480" style="display: block; margin: auto;"></p>
<p>In addition to choosing a plotting method, <code>plotdap()</code> is where you can define properties of the background map, including the target projection using a valid coordinate reference system (CRS) definition. Projection is performed using the <a href="http://proj4.org/">PROJ.4 library</a>, and <a href="http://www.spatialreference.org">spatialreference.org</a> is a great resource for finding PROJ.4 CRS descriptions. Using the search utility, you can for example, <a href="http://spatialreference.org/ref/sr-org/?search=South+Pole&amp;srtext=Search">search for “South Pole”</a> and pick from a number of options. Here I’ve chosen the <a href="http://spatialreference.org/ref/sr-org/8375/">MODIS South Pole Stereographic</a> option and copy-pasted the <a href="http://spatialreference.org/ref/sr-org/8375/proj4/">Proj4 page</a> with the CRS definition:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1"><span class="kw">plotdap</span>(<span class="st">"base"</span>,</a>
<a class="sourceLine" id="cb5-2" title="2">  <span class="dt">mapTitle =</span> <span class="st">"MODIS South Pole Stereographic"</span>, </a>
<a class="sourceLine" id="cb5-3" title="3">  <span class="dt">mapFill =</span> <span class="st">"transparent"</span>, </a>
<a class="sourceLine" id="cb5-4" title="4">  <span class="dt">mapColor =</span> <span class="st">"steelblue"</span>,</a>
<a class="sourceLine" id="cb5-5" title="5">  <span class="dt">crs =</span> <span class="st">"+proj=stere +lat_0=-90 +lat_ts=-90 +lon_0=-63 +k=1 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs"</span></a>
<a class="sourceLine" id="cb5-6" title="6">)</a></code></pre></div>
<p><img src="using_plotdap_files/figure-html/southPole-1.png" width="480" style="display: block; margin: auto;"></p>
<p>You might notice that some projections aren’t “well-defined” on a global scale, and thus, may result in an error, or a “broken” looking map. For instance, <a href="http://spatialreference.org/ref/epsg/3467/">this Albers projection centered on Alaska</a>:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1">alaska &lt;-<span class="st"> "+proj=aea +lat_1=55 +lat_2=65 +lat_0=50 +lon_0=-154 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"</span></a>
<a class="sourceLine" id="cb6-2" title="2"><span class="kw">plotdap</span>(<span class="st">"base"</span>, <span class="dt">crs =</span> alaska)</a></code></pre></div>
<p><img src="using_plotdap_files/figure-html/alaska-1.png" width="480" style="display: block; margin: auto;"></p>
<p>That does not mean we can’t use this (or similar) projections – we just have to be careful that they are sensible given the lat/lon limits. By default, those limits span the entire world, but as we’ll see later, the limits are shrunk to the given data (i.e., <code>griddap()</code> / <code>tabledap()</code>) limits. In other words, we should expect this projection to work once we “add” some data located near Alaska to the visualization. However, in case you want to make a map without any data, or want to customize the background map in some special way, you can supply an <a href="https://CRAN.R-project.org/package=sf"><strong>sf</strong></a> object (or something coercable to an <strong>sf</strong> object) to the <code>mapData</code> argument.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(sf)</a>
<a class="sourceLine" id="cb7-2" title="2"><span class="co">#&gt; Linking to GEOS 3.7.2, GDAL 2.4.2, PROJ 5.2.0</span></a>
<a class="sourceLine" id="cb7-3" title="3"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(mapdata)</a>
<a class="sourceLine" id="cb7-4" title="4">w &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/sf/man/st_as_sf.html">st_as_sf</a></span>(maps<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/maps/man/map.html">map</a></span>(<span class="st">"world"</span>, <span class="dt">plot =</span> <span class="ot">FALSE</span>, <span class="dt">fill =</span> <span class="ot">TRUE</span>))</a>
<a class="sourceLine" id="cb7-5" title="5">us &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/sf/man/st_transform.html">st_transform</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/subset.html">subset</a></span>(w, ID <span class="op">==</span><span class="st"> "USA"</span>), alaska)</a>
<a class="sourceLine" id="cb7-6" title="6"><span class="kw">plotdap</span>(<span class="dt">mapData =</span> us)</a></code></pre></div>
<p><img src="using_plotdap_files/figure-html/usmap-1.png" width="480" style="display: block; margin: auto;"></p>
<p>With the odd exception of window sizing and projections, the options in <code>plotdap()</code> should <em>just work</em> in a similar way for either plotting method. However, there are some useful options that are deliberately left out, since they work differently based on the plotting method.</p>
<p>The <code>mapData</code> argument can be used to change the resolution of the continental outlines or to limit the outline to a pre-selected area, which can speed up processing because fewer unused polygons need to be clipped. This is particularly important for maps that will cross the dateline. So for example to use the hi-res outlines for VIIIRS SST off the coast of North America:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1">sstInfo &lt;-<span class="st"> </span>rerddap<span class="op">::</span><span class="kw"><a href="https://docs.ropensci.org/rerddap/reference/info.html">info</a></span>(<span class="st">'erdVHsstaWS3day'</span>)</a>
<a class="sourceLine" id="cb8-2" title="2"><span class="co"># get latest 3-day composite sst</span></a>
<a class="sourceLine" id="cb8-3" title="3">viirsSST &lt;-<span class="st"> </span>rerddap<span class="op">::</span><span class="kw"><a href="https://docs.ropensci.org/rerddap/reference/griddap.html">griddap</a></span>(sstInfo, </a>
<a class="sourceLine" id="cb8-4" title="4">                             <span class="dt">latitude =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">41.</span>, <span class="fl">31.</span>), </a>
<a class="sourceLine" id="cb8-5" title="5">                             <span class="dt">longitude =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="op">-</span><span class="fl">128.</span>, <span class="dv">-115</span>), </a>
<a class="sourceLine" id="cb8-6" title="6">                             <span class="dt">time =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">'last'</span>,<span class="st">'last'</span>), </a>
<a class="sourceLine" id="cb8-7" title="7">                             <span class="dt">fields =</span> <span class="st">'sst'</span>)</a></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1">w &lt;-<span class="st"> </span><span class="kw">map</span>(<span class="st">"worldHires"</span>, <span class="dt">xlim =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="op">-</span><span class="fl">140.</span>, <span class="dv">-114</span>), <span class="dt">ylim =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">30.</span>, <span class="fl">42.</span>), </a>
<a class="sourceLine" id="cb9-2" title="2">         <span class="dt">fill =</span> <span class="ot">TRUE</span>, <span class="dt">plot =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb9-3" title="3"><span class="co"># map using that outline,  temperature color from cmocean</span></a>
<a class="sourceLine" id="cb9-4" title="4"><span class="kw"><a href="../reference/add_griddap.html">add_griddap</a></span>(<span class="kw">plotdap</span>(<span class="dt">mapData =</span> w), viirsSST, <span class="op">~</span>sst, <span class="dt">fill =</span> <span class="st">"thermal"</span> )</a></code></pre></div>
<p><img src="viirs_hires.png"></p>
<p>Maps that cross the dateline work better using the “world2” or “world2Hires” databases frpm the <code>mapdata</code> package. There is a known problem with that continental database in that polygons from certain countries cause artificial lines in the map, and must removed, as done below.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1">xpos &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">135.25</span>, <span class="fl">240.25</span>)</a>
<a class="sourceLine" id="cb10-2" title="2">ypos &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">20.25</span>, <span class="fl">60.25</span>)</a>
<a class="sourceLine" id="cb10-3" title="3">zpos &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">70.02</span>, <span class="fl">70.02</span>)</a>
<a class="sourceLine" id="cb10-4" title="4">remove &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"UK:Great Britain"</span>, <span class="st">"France"</span>, <span class="st">"Spain"</span>, <span class="st">"Algeria"</span>, <span class="st">"Mali"</span>, <span class="st">"</span></a>
<a class="sourceLine" id="cb10-5" title="5"><span class="st">            Burkina Faso"</span>, <span class="st">"Ghana"</span>, <span class="st">"Togo"</span>)</a>
<a class="sourceLine" id="cb10-6" title="6"><span class="co">#subset world2Hires with those countries removed</span></a>
<a class="sourceLine" id="cb10-7" title="7">w &lt;-<span class="st"> </span><span class="kw">map</span>(<span class="st">"world2Hires"</span>, <span class="dt">plot =</span> <span class="ot">FALSE</span>, <span class="dt">fill =</span> <span class="ot">TRUE</span>, <span class="dt">ylim =</span> ypos, <span class="dt">xlim =</span> xpos)</a>
<a class="sourceLine" id="cb10-8" title="8">w &lt;-<span class="st"> </span><span class="kw">map</span>(<span class="st">"world2Hires"</span>, <span class="dt">regions =</span> w<span class="op">$</span>names[<span class="op">!</span>(w<span class="op">$</span>names <span class="op">%in%</span><span class="st"> </span>remove)], </a>
<a class="sourceLine" id="cb10-9" title="9">         <span class="dt">plot =</span> <span class="ot">FALSE</span>, <span class="dt">fill =</span> <span class="ot">TRUE</span>, <span class="dt">ylim =</span> ypos, <span class="dt">xlim =</span> xpos)</a>
<a class="sourceLine" id="cb10-10" title="10"><span class="co"># plot result</span></a>
<a class="sourceLine" id="cb10-11" title="11"><span class="kw">plotdap</span>(<span class="dt">mapData =</span> w)</a></code></pre></div>
<p><img src="using_plotdap_files/figure-html/world2Hires-1.png" width="480" style="display: block; margin: auto;"></p>
<p>Since the result of <code>plotdap()</code> is always a map, it always forces a fixed aspect ratio (i.e., <span class="math inline">\(\frac{height}{width}\)</span> of graph equals <span class="math inline">\(r=\frac{latitude}{longitude}\)</span>). For this reason, the current size of your graphics device may not be sensible for the value of <span class="math inline">\(r\)</span> (for instance, if <span class="math inline">\(r\)</span> is high, but the height of the graphics device is small, you may see an error such as: <code>polygon edge not found</code> since the device cannot possibly render the result under the conditions). For a number of reasons, <code>plotdap()</code> will not automatically resize your graphics device; instead, it’s recommended that you use a reliable graphics device such as Cairo, and use a height/width ratio close to <span class="math inline">\(r\)</span>.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" title="1"><span class="co"># write plot to disk using the Cairo package</span></a>
<a class="sourceLine" id="cb11-2" title="2"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(Cairo)</a>
<a class="sourceLine" id="cb11-3" title="3"><span class="co"># (latitude limits) / (longitude limits)</span></a>
<a class="sourceLine" id="cb11-4" title="4">r &lt;-<span class="st"> </span><span class="dv">85</span> <span class="op">/</span><span class="st"> </span><span class="dv">120</span></a>
<a class="sourceLine" id="cb11-5" title="5"><span class="kw"><a href="https://rdrr.io/pkg/Cairo/man/Cairo.html">CairoPNG</a></span>(<span class="st">"myPlot.png"</span>, <span class="dt">height =</span> <span class="dv">400</span> <span class="op">*</span><span class="st"> </span>r, <span class="dt">width =</span> <span class="dv">400</span>, <span class="dt">res =</span> <span class="dv">96</span>)</a>
<a class="sourceLine" id="cb11-6" title="6"><span class="co"># alter default margins for base plotting </span></a>
<a class="sourceLine" id="cb11-7" title="7"><span class="co"># (leaving just enough space for a title)</span></a>
<a class="sourceLine" id="cb11-8" title="8"><span class="kw"><a href="https://rdrr.io/r/graphics/par.html">par</a></span>(<span class="dt">mar =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>))</a>
<a class="sourceLine" id="cb11-9" title="9"><span class="kw">plotdap</span>(<span class="st">"base"</span>, <span class="dt">mapData =</span> us, <span class="dt">mapTitle =</span> <span class="st">"Albers projection of Alaska"</span>)</a>
<a class="sourceLine" id="cb11-10" title="10"><span class="kw"><a href="https://rdrr.io/r/grDevices/dev.html">dev.off</a></span>()</a></code></pre></div>
<p>More advanced users that know some base/ggplot2 plotting may want more control of certain aspects of the plot (a later section – Customizing <code>plotdap()</code> objects – covers this topic).</p>
</div>
<div id="adding-tabledap-layers" class="section level2">
<h2 class="hasAnchor">
<a href="#adding-tabledap-layers" class="anchor"></a>Adding <code>tabledap()</code> layers</h2>
<p>The <code><a href="../reference/add_tabledap.html">add_tabledap()</a></code> function allows you to add markers that encode variable(s) obtained via <code>tabledap()</code> to an existing <code>plotdap()</code> object. For example, suppose we have the following <code>sardines</code> data, and wish to understand the frequency of subsample counts:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" title="1">my_url &lt;-<span class="st"> 'https://coastwatch.pfeg.noaa.gov/erddap/'</span></a>
<a class="sourceLine" id="cb12-2" title="2">sardines &lt;-<span class="st"> </span><span class="kw">tabledap</span>(</a>
<a class="sourceLine" id="cb12-3" title="3">  <span class="st">'FRDCPSTrawlLHHaulCatch'</span>,</a>
<a class="sourceLine" id="cb12-4" title="4">  <span class="dt">fields =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">'latitude'</span>,  <span class="st">'longitude'</span>, <span class="st">'time'</span>, <span class="st">'scientific_name'</span>, </a>
<a class="sourceLine" id="cb12-5" title="5">             <span class="st">'subsample_count'</span>),</a>
<a class="sourceLine" id="cb12-6" title="6">  <span class="st">'time&gt;=2010-01-01'</span>, <span class="st">'time&lt;=2012-01-01'</span>, <span class="st">'scientific_name="Sardinops sagax"'</span>,</a>
<a class="sourceLine" id="cb12-7" title="7">   <span class="dt">url =</span> my_url)</a>
<a class="sourceLine" id="cb12-8" title="8"><span class="kw"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(sardines)</a>
<a class="sourceLine" id="cb12-9" title="9"><span class="co">#&gt; &lt;ERDDAP tabledap&gt; FRDCPSTrawlLHHaulCatch</span></a>
<a class="sourceLine" id="cb12-10" title="10"><span class="co">#&gt;    Path: [/Users/rmendels/Library/Caches/R/rerddap/825a36f7966d6e261f92f91ee4f5bdf2.csv]</span></a>
<a class="sourceLine" id="cb12-11" title="11"><span class="co">#&gt;    Last updated: [2020-01-06 14:41:08]</span></a>
<a class="sourceLine" id="cb12-12" title="12"><span class="co">#&gt;    File size:    [0 mb]</span></a>
<a class="sourceLine" id="cb12-13" title="13"><span class="co">#&gt; # A tibble: 6 x 5</span></a>
<a class="sourceLine" id="cb12-14" title="14"><span class="co">#&gt;   latitude longitude time                 scientific_name subsample_count</span></a>
<a class="sourceLine" id="cb12-15" title="15"><span class="co">#&gt;   &lt;chr&gt;    &lt;chr&gt;     &lt;chr&gt;                &lt;chr&gt;                     &lt;int&gt;</span></a>
<a class="sourceLine" id="cb12-16" title="16"><span class="co">#&gt; 1 38.1945  -124.07   2010-04-16T04:36:00Z Sardinops sagax              50</span></a>
<a class="sourceLine" id="cb12-17" title="17"><span class="co">#&gt; 2 37.609   -123.6561 2010-04-18T03:54:00Z Sardinops sagax              38</span></a>
<a class="sourceLine" id="cb12-18" title="18"><span class="co">#&gt; 3 37.4188  -123.3463 2010-04-18T11:48:00Z Sardinops sagax               1</span></a>
<a class="sourceLine" id="cb12-19" title="19"><span class="co">#&gt; 4 36.984   -123.3326 2010-04-19T04:27:00Z Sardinops sagax              50</span></a>
<a class="sourceLine" id="cb12-20" title="20"><span class="co">#&gt; 5 36.8118  -123.6868 2010-04-19T07:42:00Z Sardinops sagax              50</span></a>
<a class="sourceLine" id="cb12-21" title="21"><span class="co">#&gt; 6 36.7333  -123.8675 2010-04-19T10:55:00Z Sardinops sagax              50</span></a></code></pre></div>
<p>At the very least, <code><a href="../reference/add_tabledap.html">add_tabledap()</a></code> needs a base map (i.e., a <code>plotdap()</code> object), the <code>tabledap()</code> data, and a <em>formula</em> defining the variable of interest (for encoding the color of the markers). In R, you can create a formula by prefixing <code>~</code> to some expression. This formula can simply reference a variable already residing in the dataset (e.g., <code>~subsample_count</code>) or it can be a function of some variables (e.g. <code>~log2(subsample_count)</code>):</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" title="1">p1 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/add_tabledap.html">add_tabledap</a></span>(</a>
<a class="sourceLine" id="cb13-2" title="2">  <span class="kw">plotdap</span>(<span class="dt">crs =</span> <span class="st">"+proj=robin"</span>,  <span class="dt">mapTitle =</span> <span class="st">"subsample count"</span>), </a>
<a class="sourceLine" id="cb13-3" title="3">  sardines, </a>
<a class="sourceLine" id="cb13-4" title="4">  <span class="op">~</span>subsample_count</a>
<a class="sourceLine" id="cb13-5" title="5">)</a>
<a class="sourceLine" id="cb13-6" title="6">p2 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/add_tabledap.html">add_tabledap</a></span>(</a>
<a class="sourceLine" id="cb13-7" title="7">  <span class="kw">plotdap</span>(<span class="dt">crs =</span> <span class="st">"+proj=robin"</span>, <span class="dt">mapTitle =</span> <span class="st">"Log subsample count"</span>), </a>
<a class="sourceLine" id="cb13-8" title="8">  sardines, </a>
<a class="sourceLine" id="cb13-9" title="9">  <span class="op">~</span><span class="kw"><a href="https://rdrr.io/r/base/Log.html">log2</a></span>(subsample_count)</a>
<a class="sourceLine" id="cb13-10" title="10">) </a>
<a class="sourceLine" id="cb13-11" title="11"></a>
<a class="sourceLine" id="cb13-12" title="12">p1</a>
<a class="sourceLine" id="cb13-13" title="13">p2</a></code></pre></div>
<p><img src="sardines.png"></p>
</div>
<div id="modifying-tabledap-layers" class="section level2">
<h2 class="hasAnchor">
<a href="#modifying-tabledap-layers" class="anchor"></a>Modifying <code>tabledap()</code> layers</h2>
<p>It is also easy to alter the color scale as well as the symbol type and size in <code><a href="../reference/add_tabledap.html">add_tabledap()</a></code> via the <code>color</code>, <code>shape</code> and <code>size</code> arguments.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" title="1">p1 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/add_tabledap.html">add_tabledap</a></span>(</a>
<a class="sourceLine" id="cb14-2" title="2">  <span class="kw">plotdap</span>(<span class="dt">crs =</span> <span class="st">"+proj=robin"</span>, <span class="dt">mapTitle =</span> <span class="st">"Sardines - change color"</span>), </a>
<a class="sourceLine" id="cb14-3" title="3">  sardines, </a>
<a class="sourceLine" id="cb14-4" title="4">  <span class="op">~</span>subsample_count, </a>
<a class="sourceLine" id="cb14-5" title="5">  <span class="dt">color =</span> <span class="st">"dense"</span>, </a>
<a class="sourceLine" id="cb14-6" title="6">)</a>
<a class="sourceLine" id="cb14-7" title="7">p2  &lt;-<span class="st"> </span><span class="kw"><a href="../reference/add_tabledap.html">add_tabledap</a></span>(</a>
<a class="sourceLine" id="cb14-8" title="8">  <span class="kw">plotdap</span>(<span class="dt">crs =</span> <span class="st">"+proj=robin"</span>, <span class="dt">mapTitle =</span> <span class="st">"Sardines - change shape and size"</span>), </a>
<a class="sourceLine" id="cb14-9" title="9">  sardines, </a>
<a class="sourceLine" id="cb14-10" title="10">  <span class="op">~</span>subsample_count, </a>
<a class="sourceLine" id="cb14-11" title="11">  <span class="dt">shape =</span> <span class="dv">4</span>,</a>
<a class="sourceLine" id="cb14-12" title="12">  <span class="dt">size =</span> <span class="fl">1.</span></a>
<a class="sourceLine" id="cb14-13" title="13">)</a>
<a class="sourceLine" id="cb14-14" title="14">p1</a>
<a class="sourceLine" id="cb14-15" title="15">p2</a></code></pre></div>
<p><img src="sardines2.png"></p>
<p>For further details about these arguments, please refer to the documentation on <code><a href="https://rdrr.io/r/utils/help.html">help(add_tabledap)</a></code>.</p>
</div>
<div id="adding-griddap-layers" class="section level2">
<h2 class="hasAnchor">
<a href="#adding-griddap-layers" class="anchor"></a>Adding <code>griddap()</code> layers</h2>
<p>Similar to <code><a href="../reference/add_tabledap.html">add_tabledap()</a></code>, the <code><a href="../reference/add_griddap.html">add_griddap()</a></code> function makes it easy to add rasters (i.e., rectangular tiles) to a <code>plotdap()</code> object. To demonstrate, lets obtain some of the latest sea surface temperatures along the western coast of the US.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" title="1">murSST_west &lt;-<span class="st"> </span><span class="kw">griddap</span>(</a>
<a class="sourceLine" id="cb15-2" title="2">  <span class="st">'jplMURSST41'</span>, </a>
<a class="sourceLine" id="cb15-3" title="3">  <span class="dt">latitude =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">22</span>, <span class="dv">51</span>), </a>
<a class="sourceLine" id="cb15-4" title="4">  <span class="dt">longitude =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="op">-</span><span class="dv">140</span>, <span class="dv">-105</span>),</a>
<a class="sourceLine" id="cb15-5" title="5">  <span class="dt">time =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">'last'</span>, <span class="st">'last'</span>), </a>
<a class="sourceLine" id="cb15-6" title="6">  <span class="dt">fields =</span> <span class="st">'analysed_sst'</span></a>
<a class="sourceLine" id="cb15-7" title="7">  )</a></code></pre></div>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" title="1"><span class="kw"><a href="https://rdrr.io/r/utils/str.html">str</a></span>(murSST_west<span class="op">$</span>data)</a>
<a class="sourceLine" id="cb16-2" title="2"><span class="co">#&gt; 'data.frame':    10156401 obs. of  4 variables:</span></a>
<a class="sourceLine" id="cb16-3" title="3"><span class="co">#&gt;  $ time        : chr  "2020-01-05T09:00:00Z" "2020-01-05T09:00:00Z" "2020-01-05T09:00:00Z" "2020-01-05T09:00:00Z" ...</span></a>
<a class="sourceLine" id="cb16-4" title="4"><span class="co">#&gt;  $ lat         : num  22 22 22 22 22 22 22 22 22 22 ...</span></a>
<a class="sourceLine" id="cb16-5" title="5"><span class="co">#&gt;  $ lon         : num  -140 -140 -140 -140 -140 ...</span></a>
<a class="sourceLine" id="cb16-6" title="6"><span class="co">#&gt;  $ analysed_sst: num  23.4 23.4 23.4 23.4 23.4 ...</span></a></code></pre></div>
<p>Again, similar to <code><a href="../reference/add_tabledap.html">add_tabledap()</a></code>, <code><a href="../reference/add_griddap.html">add_griddap()</a></code> needs a base map (i.e., a <code>plotdap()</code> object), the <code>griddap()</code> data, and a <em>formula</em> defining the variable of interest (for encoding the fill of the rectangles). The <code><a href="../reference/add_griddap.html">add_griddap()</a></code> function also has a <code>maxpixels</code> argument which sets a maximum threshold for the number of cells (i.e., pixels) to use before projection and plotting occurs. Compared to ggplot2, base plotting is much more efficient at rendering raster objects, so it might be worth increasing the threshold in that case:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" title="1"><span class="kw"><a href="../reference/add_griddap.html">add_griddap</a></span>(</a>
<a class="sourceLine" id="cb17-2" title="2">  <span class="kw">plotdap</span>(<span class="dt">crs =</span> <span class="st">"+proj=robin"</span>), </a>
<a class="sourceLine" id="cb17-3" title="3">  murSST_west, </a>
<a class="sourceLine" id="cb17-4" title="4">  <span class="op">~</span>analysed_sst, </a>
<a class="sourceLine" id="cb17-5" title="5">  <span class="dt">maxpixels =</span> <span class="dv">50000</span></a>
<a class="sourceLine" id="cb17-6" title="6">)</a></code></pre></div>
<p><img src="murSST_west.png"></p>
<p>The <code>murSST_west</code> grid has a single time point (i.e., <code>length(unique(murSST_west$data$time)) == 1</code>), but what do we do when there are multiple time points? In addition to animating multiple grids (a la <code><a href="../reference/add_tabledap.html">add_tabledap()</a></code>), you also have the option to summarize multiple grids into a single grid. To demonstrate, lets grab some wind speeds measured along the west coast of the US.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" title="1">wind &lt;-<span class="st"> </span><span class="kw">griddap</span>(</a>
<a class="sourceLine" id="cb18-2" title="2">  <span class="st">'erdQMwindmday'</span>, </a>
<a class="sourceLine" id="cb18-3" title="3">  <span class="dt">time =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">'2016-04-16'</span>, <span class="st">'2016-06-16'</span>),</a>
<a class="sourceLine" id="cb18-4" title="4">  <span class="dt">latitude =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">30</span>, <span class="dv">50</span>), </a>
<a class="sourceLine" id="cb18-5" title="5">  <span class="dt">longitude =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">210</span>, <span class="dv">240</span>),</a>
<a class="sourceLine" id="cb18-6" title="6">  <span class="dt">fields =</span> <span class="st">'y_wind'</span></a>
<a class="sourceLine" id="cb18-7" title="7">)</a>
<a class="sourceLine" id="cb18-8" title="8"><span class="kw"><a href="https://rdrr.io/r/base/unique.html">unique</a></span>(wind<span class="op">$</span>data<span class="op">$</span>time)</a>
<a class="sourceLine" id="cb18-9" title="9"><span class="co">#&gt; [1] "2016-04-16T00:00:00Z" "2016-05-16T00:00:00Z" "2016-06-16T00:00:00Z"</span></a></code></pre></div>
<p>When faced with multiple time periods, and <code>animate = FALSE</code> (the default), the <code>time</code> argument is used to reduce multiple grids (i.e., raster bricks) to a single grid (i.e., a single raster layer). You can pass any R function to the <code>time</code> argument, but when <code>animate = FALSE</code>, you should take care to ensure the function returns a single value. The default uses the <code><a href="https://rdrr.io/r/base/mean.html">mean(na.rm = TRUE)</a></code> function so that each cell represents the average (in this case amongst three time points), but we could easily set this to <code><a href="https://rdrr.io/r/stats/cor.html">var()</a></code> to get the variance for each cell:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" title="1">p1 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/add_griddap.html">add_griddap</a></span>(</a>
<a class="sourceLine" id="cb19-2" title="2">  <span class="kw">plotdap</span>(<span class="dt">mapTitle =</span> <span class="st">"Mean Meridional Wind"</span>), </a>
<a class="sourceLine" id="cb19-3" title="3">  wind, </a>
<a class="sourceLine" id="cb19-4" title="4">  <span class="op">~</span>y_wind, </a>
<a class="sourceLine" id="cb19-5" title="5">  <span class="dt">fill =</span> <span class="st">"delta"</span>, </a>
<a class="sourceLine" id="cb19-6" title="6">  <span class="dt">time =</span> mean</a>
<a class="sourceLine" id="cb19-7" title="7">) </a>
<a class="sourceLine" id="cb19-8" title="8">my_func &lt;-<span class="st"> </span><span class="cf">function</span>(x) <span class="kw"><a href="https://rdrr.io/r/stats/cor.html">var</a></span>(x, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb19-9" title="9">p2 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/add_griddap.html">add_griddap</a></span>(</a>
<a class="sourceLine" id="cb19-10" title="10">  <span class="kw">plotdap</span>(<span class="dt">mapTitle =</span> <span class="st">"Variance of Meridional Wind"</span>), </a>
<a class="sourceLine" id="cb19-11" title="11">  wind, </a>
<a class="sourceLine" id="cb19-12" title="12">  <span class="op">~</span>y_wind, </a>
<a class="sourceLine" id="cb19-13" title="13">  <span class="dt">fill =</span> <span class="st">"delta"</span>, </a>
<a class="sourceLine" id="cb19-14" title="14">  <span class="dt">time =</span> my_func</a>
<a class="sourceLine" id="cb19-15" title="15">) </a>
<a class="sourceLine" id="cb19-16" title="16">p1</a>
<a class="sourceLine" id="cb19-17" title="17">p2</a></code></pre></div>
<p><img src="using_plotdap_files/figure-html/plot_wind-1.png" width=".49\linewidth"><img src="using_plotdap_files/figure-html/plot_wind-2.png" width=".49\linewidth"></p>
<div id="changing-the-layer-order" class="section level3">
<h3 class="hasAnchor">
<a href="#changing-the-layer-order" class="anchor"></a>Changing the layer order</h3>
<p>By default, <code>add_griddap</code> plots the land first and then the grid on top of that. For many uses that is desirable, but at other times it is more desirable to have the land mask the grid. This can now be done in the print method, by saving the <code>plotdap</code> object and printing with the option “landmask = TRUE”.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" title="1"><span class="kw">plotdap</span>(<span class="dt">mapTitle =</span> <span class="st">"Grid over Land"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb20-2" title="2"><span class="st">      </span><span class="kw"><a href="../reference/add_griddap.html">add_griddap</a></span>(</a>
<a class="sourceLine" id="cb20-3" title="3">        viirsSST, </a>
<a class="sourceLine" id="cb20-4" title="4">        <span class="op">~</span>sst, </a>
<a class="sourceLine" id="cb20-5" title="5">        <span class="dt">fill =</span> <span class="st">"thermal"</span></a>
<a class="sourceLine" id="cb20-6" title="6">        )</a></code></pre></div>
<p><img src="viirsSST_gridland.png"></p>
<p>and compare when land is plotted over the grid:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" title="1"><span class="kw">plotdap</span>(<span class="dt">mapTitle =</span> <span class="st">"Land Over Grid"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb21-2" title="2"><span class="st">    </span><span class="kw"><a href="../reference/add_griddap.html">add_griddap</a></span>(</a>
<a class="sourceLine" id="cb21-3" title="3">      viirsSST, </a>
<a class="sourceLine" id="cb21-4" title="4">      <span class="op">~</span>sst, </a>
<a class="sourceLine" id="cb21-5" title="5">      <span class="dt">fill =</span> <span class="st">"thermal"</span></a>
<a class="sourceLine" id="cb21-6" title="6">      ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb21-7" title="7"><span class="st">    </span><span class="kw"><a href="https://rdrr.io/r/base/print.html">print</a></span>(<span class="dt">landmask =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<p><img src="viirsSST_landgrid.png"></p>
</div>
<div id="maxpixels" class="section level3">
<h3 class="hasAnchor">
<a href="#maxpixels" class="anchor"></a>maxpixels</h3>
<p>Images of satellite data can contain a large number of pixels. <code><a href="../reference/add_griddap.html">add_griddap()</a></code> allows for a differing number of pixels to be used (default is 10,000) by setting the parameter “maxpixels”. When the actual number pixels is larger than the value of “maxpixels”, the image is sub-sampled. This can greatly affect the how the image looks.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" title="1"><span class="kw">plotdap</span>(<span class="dt">mapTitle =</span> <span class="st">"maxpixels = 10,000"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb22-2" title="2"><span class="st">    </span><span class="kw"><a href="../reference/add_griddap.html">add_griddap</a></span>(</a>
<a class="sourceLine" id="cb22-3" title="3">      viirsSST, </a>
<a class="sourceLine" id="cb22-4" title="4">      <span class="op">~</span>sst, </a>
<a class="sourceLine" id="cb22-5" title="5">      <span class="dt">fill =</span> <span class="st">"thermal"</span>,</a>
<a class="sourceLine" id="cb22-6" title="6">      <span class="dt">maxpixels =</span> <span class="dv">10000</span> </a>
<a class="sourceLine" id="cb22-7" title="7">      )</a></code></pre></div>
<p><img src="viirsSST_10000.png"></p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" title="1"><span class="kw">plotdap</span>(<span class="dt">mapTitle =</span> <span class="st">"maxpixels = 50,000"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb23-2" title="2"><span class="st">     </span><span class="kw"><a href="../reference/add_griddap.html">add_griddap</a></span>(</a>
<a class="sourceLine" id="cb23-3" title="3">       viirsSST, </a>
<a class="sourceLine" id="cb23-4" title="4">       <span class="op">~</span>sst, </a>
<a class="sourceLine" id="cb23-5" title="5">       <span class="dt">fill =</span> <span class="st">"thermal"</span>, </a>
<a class="sourceLine" id="cb23-6" title="6">       <span class="dt">maxpixels =</span> <span class="dv">50000</span></a>
<a class="sourceLine" id="cb23-7" title="7">       )</a></code></pre></div>
<p><img src="viirsSST_50000.png"></p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" title="1"><span class="kw">plotdap</span>(<span class="dt">mapTitle =</span> <span class="st">"maxpixels = 100,000"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb24-2" title="2"><span class="st">    </span><span class="kw"><a href="../reference/add_griddap.html">add_griddap</a></span>(</a>
<a class="sourceLine" id="cb24-3" title="3">      viirsSST, </a>
<a class="sourceLine" id="cb24-4" title="4">      <span class="op">~</span>sst, </a>
<a class="sourceLine" id="cb24-5" title="5">      <span class="dt">fill =</span> <span class="st">"thermal"</span>,  </a>
<a class="sourceLine" id="cb24-6" title="6">      <span class="dt">maxpixels =</span> <span class="dv">100000</span></a>
<a class="sourceLine" id="cb24-7" title="7">      )</a></code></pre></div>
<p><img src="viirsSST_100000.png"></p>
<p>The increased resolution can really make a difference when the land masks the grid:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" title="1"><span class="kw">plotdap</span>(<span class="dt">mapTitle =</span> <span class="st">"maxpixels = 100,000, landmask"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb25-2" title="2"><span class="st">    </span><span class="kw"><a href="../reference/add_griddap.html">add_griddap</a></span>(</a>
<a class="sourceLine" id="cb25-3" title="3">      viirsSST, </a>
<a class="sourceLine" id="cb25-4" title="4">      <span class="op">~</span>sst, </a>
<a class="sourceLine" id="cb25-5" title="5">      <span class="dt">fill =</span> <span class="st">"thermal"</span>,  </a>
<a class="sourceLine" id="cb25-6" title="6">      <span class="dt">maxpixels =</span> <span class="dv">100000</span></a>
<a class="sourceLine" id="cb25-7" title="7">      ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb25-8" title="8"><span class="st">    </span><span class="kw"><a href="https://rdrr.io/r/base/print.html">print</a></span>(<span class="dt">landmask =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<p><img src="viirsSST_100000_mask.png"></p>
</div>
<div id="working-with-other-continental-outlines" class="section level3">
<h3 class="hasAnchor">
<a href="#working-with-other-continental-outlines" class="anchor"></a>Working with other continental outlines</h3>
<p>My default, <code>plotdap()</code> uses the global “world” database from the <code>map</code> package, and then trims the polygons based on the limit of the map. Higher resolution coastlines or coastlines that cross the dateline require can be used in <code>plotdap()</code>by passing this information in the function call. Similarly, computations can be sped up by pre-selecting the area of the coastline database before calling <code>plotdap()</code>.</p>
<p>To map the VIIRS SST data from the previous section using a subsetted, high-resolution continental outline, first the subset is defined for the high-resolution database:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" title="1">w &lt;-<span class="st"> </span><span class="kw">map</span>(<span class="st">"worldHires"</span>, <span class="dt">xlim =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="op">-</span><span class="fl">130.</span>, <span class="dv">-114</span>), <span class="dt">ylim =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">30.</span>, <span class="fl">42.</span>), </a>
<a class="sourceLine" id="cb26-2" title="2">         <span class="dt">fill =</span> <span class="ot">TRUE</span>, <span class="dt">plot =</span> <span class="ot">FALSE</span>)</a></code></pre></div>
<p>and then plotted, with the landmask option:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb27-1" title="1"><span class="kw">plotdap</span>(<span class="dt">mapData =</span> w) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb27-2" title="2"><span class="st">    </span><span class="kw"><a href="../reference/add_griddap.html">add_griddap</a></span>(</a>
<a class="sourceLine" id="cb27-3" title="3">      viirsSST, </a>
<a class="sourceLine" id="cb27-4" title="4">      <span class="op">~</span>sst, </a>
<a class="sourceLine" id="cb27-5" title="5">      <span class="dt">fill =</span> <span class="st">'thermal'</span>,  </a>
<a class="sourceLine" id="cb27-6" title="6">      <span class="dt">maxpixels =</span> <span class="dv">50000</span></a>
<a class="sourceLine" id="cb27-7" title="7">      ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb27-8" title="8"><span class="st">    </span><span class="kw"><a href="https://rdrr.io/r/base/print.html">print</a></span>(<span class="dt">landmask =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<p><img src="using_plotdap_files/figure-html/viirs_hires_mask-1.png" width="480" style="display: block; margin: auto;"></p>
<p>The “Simple Ocean Data Assimilation (SODA)” model (see <a href="https://www.atmos.umd.edu/~ocean/" class="uri">https://www.atmos.umd.edu/~ocean/</a>) reconstructs the historical physical history of the ocean since the beginning of the 20th century. Here is the temperature at 70m depth for December 2015 for the North Pacific Ocean, as an example of using <code>plotdap()</code> when the data cross the dateline:</p>
<p>First, get the SODA data:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" title="1">soda70Info &lt;-<span class="st"> </span>rerddap<span class="op">::</span><span class="kw"><a href="https://docs.ropensci.org/rerddap/reference/info.html">info</a></span>(<span class="st">'erdSoda331oceanmday'</span>)</a>
<a class="sourceLine" id="cb28-2" title="2">xpos &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">135.25</span>, <span class="fl">240.25</span>)</a>
<a class="sourceLine" id="cb28-3" title="3">ypos &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">20.25</span>, <span class="fl">60.25</span>)</a>
<a class="sourceLine" id="cb28-4" title="4">zpos &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">70.02</span>, <span class="fl">70.02</span>)</a>
<a class="sourceLine" id="cb28-5" title="5">tpos &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">'2010-12-15'</span>, <span class="st">'2010-12-15'</span>)</a>
<a class="sourceLine" id="cb28-6" title="6">soda70 &lt;-<span class="st"> </span>rerddap<span class="op">::</span><span class="kw"><a href="https://docs.ropensci.org/rerddap/reference/griddap.html">griddap</a></span>(soda70Info,  </a>
<a class="sourceLine" id="cb28-7" title="7">                  <span class="dt">longitude =</span> xpos, </a>
<a class="sourceLine" id="cb28-8" title="8">                  <span class="dt">latitude =</span> ypos, </a>
<a class="sourceLine" id="cb28-9" title="9">                  <span class="dt">time =</span> tpos, </a>
<a class="sourceLine" id="cb28-10" title="10">                  <span class="dt">depth =</span> zpos, </a>
<a class="sourceLine" id="cb28-11" title="11">                  <span class="dt">fields =</span> <span class="st">'temp'</span> )</a></code></pre></div>
<p>then plot with <code>plotdap</code></p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb29-1" title="1">remove &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"UK:Great Britain"</span>, <span class="st">"France"</span>, <span class="st">"Spain"</span>, <span class="st">"Algeria"</span>, <span class="st">"Mali"</span>, </a>
<a class="sourceLine" id="cb29-2" title="2">            <span class="st">"Burkina Faso"</span>, <span class="st">"Ghana"</span>, <span class="st">"Togo"</span>)</a>
<a class="sourceLine" id="cb29-3" title="3"><span class="co">#subset world2Hires with those countries removed</span></a>
<a class="sourceLine" id="cb29-4" title="4">w &lt;-<span class="st"> </span><span class="kw">map</span>(<span class="st">"mapdata::world2Hires"</span>, <span class="dt">plot =</span> <span class="ot">FALSE</span>, <span class="dt">fill =</span> <span class="ot">TRUE</span>, </a>
<a class="sourceLine" id="cb29-5" title="5">         <span class="dt">ylim =</span> ypos, <span class="dt">xlim =</span> xpos)</a>
<a class="sourceLine" id="cb29-6" title="6">w &lt;-<span class="st"> </span><span class="kw">map</span>(<span class="st">"mapdata::world2Hires"</span>, <span class="dt">regions =</span> w<span class="op">$</span>names[<span class="op">!</span>(w<span class="op">$</span>names <span class="op">%in%</span><span class="st"> </span>remove)], </a>
<a class="sourceLine" id="cb29-7" title="7">         <span class="dt">plot =</span> <span class="ot">FALSE</span>, <span class="dt">fill =</span> <span class="ot">TRUE</span>, <span class="dt">ylim =</span> ypos, <span class="dt">xlim =</span> xpos)</a>
<a class="sourceLine" id="cb29-8" title="8"><span class="co"># plot result</span></a>
<a class="sourceLine" id="cb29-9" title="9"><span class="kw">plotdap</span>(<span class="dt">mapData =</span> w) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb29-10" title="10"><span class="st">        </span><span class="kw"><a href="../reference/add_griddap.html">add_griddap</a></span>(</a>
<a class="sourceLine" id="cb29-11" title="11">          soda70, </a>
<a class="sourceLine" id="cb29-12" title="12">          <span class="op">~</span>temp, </a>
<a class="sourceLine" id="cb29-13" title="13">          <span class="dt">fill =</span> <span class="st">"thermal"</span></a>
<a class="sourceLine" id="cb29-14" title="14">          ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb29-15" title="15"><span class="st">        </span><span class="kw"><a href="https://rdrr.io/r/base/print.html">print</a></span>(<span class="dt">landmask =</span> <span class="ot">TRUE</span>) </a></code></pre></div>
<p><img src="using_plotdap_files/figure-html/soda70-1.png" width="480" style="display: block; margin: auto;"></p>
</div>
</div>
<div id="combining-tablesgrids" class="section level2">
<h2 class="hasAnchor">
<a href="#combining-tablesgrids" class="anchor"></a>Combining tables/grids</h2>
<p>The <code>plotdap()</code> interface is designed so that you can plot both tables and grids at once (although I don’t recommend trying to plot more than one <code>griddap()</code> or <code>tabledap()</code> object at once). It’s also designed to work well with the <code><a href="https://rdrr.io/pkg/magrittr/man/pipe.html">%&gt;%</a></code> operator from the <strong>magrittr</strong> package so that code can be expressed in a left-to-right (rather than inside-out) fashion:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb30-1" title="1"><span class="kw">plotdap</span>(<span class="st">"base"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb30-2" title="2"><span class="st">  </span><span class="kw"><a href="../reference/add_griddap.html">add_griddap</a></span>(</a>
<a class="sourceLine" id="cb30-3" title="3">    murSST_west, </a>
<a class="sourceLine" id="cb30-4" title="4">    <span class="op">~</span>analysed_sst</a>
<a class="sourceLine" id="cb30-5" title="5">    ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb30-6" title="6"><span class="st">  </span><span class="kw"><a href="../reference/add_tabledap.html">add_tabledap</a></span>(</a>
<a class="sourceLine" id="cb30-7" title="7">    sardines, </a>
<a class="sourceLine" id="cb30-8" title="8">    <span class="op">~</span>subsample_count</a>
<a class="sourceLine" id="cb30-9" title="9">    )</a>
<a class="sourceLine" id="cb30-10" title="10"><span class="co">#&gt; grid object contains more than 10000 pixels</span></a>
<a class="sourceLine" id="cb30-11" title="11"><span class="co">#&gt; increase `maxpixels` for a finer resolution</span></a>
<a class="sourceLine" id="cb30-12" title="12"><span class="co">#&gt; Date in ISO8601 format; converting timezone from UTC to "GMT".</span></a></code></pre></div>
<p><img src="using_plotdap_files/figure-html/overlay-1.png" width="480" style="display: block; margin: auto;"></p>
</div>
<div id="modifying-ggplotdap-objects" class="section level2">
<h2 class="hasAnchor">
<a href="#modifying-ggplotdap-objects" class="anchor"></a>Modifying <code>ggplotdap</code> objects</h2>
<p>By this point, you might have noticed some subtle differences in the defaults of <code>plotdap("ggplot2")</code> versus <code>plotdap("base")</code>. The default base version is intentionally left minimal as it is often much harder (or impossible) to modify/remove elements from a base graphic once it’s drawn. However, this is fairly easy using the <strong>ggplot2</strong> approach (assuming you know a bit of <strong>ggplot2</strong>), thanks to the <code><a href="../reference/add_ggplot.html">add_ggplot()</a></code> function (think of it like the <code><a href="https://rdrr.io/r/base/Arithmetic.html">+</a></code> operator in <strong>ggplot2</strong>).</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb31-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(ggplot2)</a>
<a class="sourceLine" id="cb31-2" title="2"><span class="kw">plotdap</span>(<span class="dt">crs =</span> <span class="st">"+proj=robin"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb31-3" title="3"><span class="st">  </span><span class="kw"><a href="../reference/add_tabledap.html">add_tabledap</a></span>(</a>
<a class="sourceLine" id="cb31-4" title="4">    sardines, </a>
<a class="sourceLine" id="cb31-5" title="5">    <span class="op">~</span>subsample_count, </a>
<a class="sourceLine" id="cb31-6" title="6">    <span class="dt">size =</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb31-7" title="7">    ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb31-8" title="8"><span class="st">  </span><span class="kw"><a href="../reference/add_ggplot.html">add_ggplot</a></span>(</a>
<a class="sourceLine" id="cb31-9" title="9">    <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span>(</a>
<a class="sourceLine" id="cb31-10" title="10">      <span class="dt">subtitle =</span> <span class="st">"Sardinops sagax samples"</span>,</a>
<a class="sourceLine" id="cb31-11" title="11">      <span class="dt">caption =</span> <span class="st">"Sardines are yummy"</span></a>
<a class="sourceLine" id="cb31-12" title="12">    ), </a>
<a class="sourceLine" id="cb31-13" title="13">    <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span>(),</a>
<a class="sourceLine" id="cb31-14" title="14">    <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span>(<span class="dt">axis.ticks =</span> <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span>(), <span class="dt">axis.text =</span> <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span>())</a>
<a class="sourceLine" id="cb31-15" title="15">  )</a>
<a class="sourceLine" id="cb31-16" title="16"><span class="co">#&gt; Date in ISO8601 format; converting timezone from UTC to "GMT".</span></a></code></pre></div>
<p><img src="using_plotdap_files/figure-html/modify-1.png" width="480" style="display: block; margin: auto;"></p>
<p>Similarly, VIIRS SST plot in the previous section, detail is lost due to high values observed in landlocked water. To modify that plot:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb32-1" title="1">temp_color &lt;-<span class="st"> </span>rerddap<span class="op">::</span>colors<span class="op">$</span>temperature</a>
<a class="sourceLine" id="cb32-2" title="2"><span class="kw">plotdap</span>(<span class="dt">mapTitle =</span> <span class="st">"Reset colorscale limits"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb32-3" title="3"><span class="st">    </span><span class="kw"><a href="../reference/add_griddap.html">add_griddap</a></span>(</a>
<a class="sourceLine" id="cb32-4" title="4">      viirsSST, </a>
<a class="sourceLine" id="cb32-5" title="5">      <span class="op">~</span>sst, </a>
<a class="sourceLine" id="cb32-6" title="6">      <span class="dt">fill =</span> <span class="st">"thermal"</span></a>
<a class="sourceLine" id="cb32-7" title="7">      ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb32-8" title="8"><span class="st">    </span><span class="kw"><a href="../reference/add_ggplot.html">add_ggplot</a></span>(</a>
<a class="sourceLine" id="cb32-9" title="9">       <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/scale_gradient.html">scale_fill_gradientn</a></span>(<span class="dt">colours =</span> temp_color, <span class="dt">na.value =</span> <span class="ot">NA</span>, <span class="dt">limits =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">10</span>, <span class="dv">20</span>)),</a>
<a class="sourceLine" id="cb32-10" title="10">        <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/scale_gradient.html">scale_colour_gradientn</a></span>(<span class="dt">colors =</span> temp_color, <span class="dt">na.value =</span> <span class="ot">NA</span>, <span class="dt">limits =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">10</span>, <span class="dv">20</span>)),</a>
<a class="sourceLine" id="cb32-11" title="11">        <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/guides.html">guides</a></span>(<span class="dt">colour =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb32-12" title="12">     ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb32-13" title="13"><span class="st">     </span><span class="kw"><a href="https://rdrr.io/r/base/print.html">print</a></span>(<span class="dt">landmask =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<p><img src="modify2.png"></p>
</div>
<div id="animating-plotdap-objects" class="section level2">
<h2 class="hasAnchor">
<a href="#animating-plotdap-objects" class="anchor"></a>Animating <code>plotdap</code> objects</h2>
<p>Since <code>time</code> is an important variable in many <code>tabledap()</code> and <code>griddap()</code> objects, both functions have an <code>animate</code> argument which will animate the maps over the <code>time</code> variable. The animations only work for the <code>ggplot2</code> option, and are based on the latest version of <code>gganimate</code>.</p>
<p><code>gganimate</code> is a very powerful package, and many of the options available are designed to allow for “tweening”, that is for smooth animation between frames. Unfortunately for complex maps with many features, that can lead to very large animations that can take hours to render. For this reason, all <code>plotdap</code> animations use <code><a href="https://gganimate.com/reference/transition_manual.html">gganimate::transition_manual</a></code> so that there is one frame for each time period, and no “tweening” between frames. The animation can be controlled by saving the animation to an object, and then displaying the saved object using <code><a href="https://gganimate.com/reference/animate.html">gganimate::animate()</a></code> to control the display. The</p>
<p>Since <code>time</code> is an important variable in many <code>tabledap()</code> objects, <code><a href="../reference/add_tabledap.html">add_tabledap()</a></code> also has a <code>animate</code> argument which allows you to easily animate over the <code>time</code> variable. It is also easy to alter the color scale and symbol type via the <code>color</code> and <code>shape</code> arguments. For details about these arguments, please refer to the documentation on <code><a href="https://rdrr.io/r/utils/help.html">help(add_tabledap)</a></code></p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb33-1" title="1"><span class="kw"><a href="../reference/add_tabledap.html">add_tabledap</a></span>(</a>
<a class="sourceLine" id="cb33-2" title="2">  <span class="kw">plotdap</span>(<span class="dt">crs =</span> <span class="st">"+proj=robin"</span>), </a>
<a class="sourceLine" id="cb33-3" title="3">  sardines, </a>
<a class="sourceLine" id="cb33-4" title="4">  <span class="op">~</span>subsample_count, </a>
<a class="sourceLine" id="cb33-5" title="5">  <span class="dt">color =</span> <span class="st">"dense"</span>, </a>
<a class="sourceLine" id="cb33-6" title="6">  <span class="dt">shape =</span> <span class="dv">4</span>, </a>
<a class="sourceLine" id="cb33-7" title="7">  <span class="dt">animate =</span> <span class="ot">TRUE</span></a>
<a class="sourceLine" id="cb33-8" title="8">)</a></code></pre></div>
<div class="figure">
<img src="sardines.gif" alt="sardine animation"><p class="caption">sardine animation</p>
</div>
<p>If you just want to animate the raw grid values over time (instead of computing summary statistic(s) for each cell), you can set <code>time</code> to the <code>identity</code> function, then set <code>animate = TRUE</code>:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb34-1" title="1"><span class="kw"><a href="../reference/add_griddap.html">add_griddap</a></span>(</a>
<a class="sourceLine" id="cb34-2" title="2">  <span class="kw">plotdap</span>(<span class="dt">crs =</span> <span class="st">"+proj=robin"</span>), </a>
<a class="sourceLine" id="cb34-3" title="3">  wind, <span class="op">~</span>y_wind, </a>
<a class="sourceLine" id="cb34-4" title="4">  <span class="dt">time =</span> identity, </a>
<a class="sourceLine" id="cb34-5" title="5">  <span class="dt">fill =</span> <span class="st">'delta'</span>,</a>
<a class="sourceLine" id="cb34-6" title="6">  <span class="dt">animate =</span> <span class="ot">TRUE</span></a>
<a class="sourceLine" id="cb34-7" title="7">)</a></code></pre></div>
<p><img src="y_wind.gif" alt="y_wind animation"> The frames per second and the total number of frames for an animated <code>plotdap</code> object <code>p</code> can be controlled calling <code><a href="https://gganimate.com/reference/animate.html">gganimate::animate(p$ggplot, ...)</a></code> with the desired other settings. Unfortunately, the map bounding box set in <code>p</code> may not be what is desired, because when <code>plotdap</code> prints an object it calculates a good bounding box for a map, but that is not stored in the object <code>p</code>. A utility function <code><a href="../reference/bbox_set.html">bbox_set()</a></code> is included which will add a desired bounding box.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb35-1" title="1">p &lt;-<span class="st"> </span><span class="kw"><a href="../reference/add_griddap.html">add_griddap</a></span>(</a>
<a class="sourceLine" id="cb35-2" title="2">  <span class="kw">plotdap</span>(<span class="dt">crs =</span> <span class="st">"+proj=robin"</span>), </a>
<a class="sourceLine" id="cb35-3" title="3">  wind, <span class="op">~</span>y_wind, </a>
<a class="sourceLine" id="cb35-4" title="4">  <span class="dt">time =</span> identity, </a>
<a class="sourceLine" id="cb35-5" title="5">  <span class="dt">fill =</span> <span class="st">'delta'</span>,</a>
<a class="sourceLine" id="cb35-6" title="6">  <span class="dt">animate =</span> <span class="ot">TRUE</span></a>
<a class="sourceLine" id="cb35-7" title="7">)</a>
<a class="sourceLine" id="cb35-8" title="8">  ylim &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">30</span>, <span class="dv">50</span>)</a>
<a class="sourceLine" id="cb35-9" title="9">  xlim &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="op">-</span><span class="dv">150</span>, <span class="dv">-120</span>)</a>
<a class="sourceLine" id="cb35-10" title="10">  p &lt;-<span class="st"> </span><span class="kw"><a href="../reference/bbox_set.html">bbox_set</a></span>(p, xlim, ylim)</a></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li>
<a href="#plotdap">plotdap</a><ul class="nav nav-pills nav-stacked">
<li><a href="#installation">Installation</a></li>
      <li><a href="#getting-started-with-plotdap">Getting started with <code>plotdap()</code></a></li>
      <li><a href="#adding-tabledap-layers">Adding <code>tabledap()</code> layers</a></li>
      <li><a href="#modifying-tabledap-layers">Modifying <code>tabledap()</code> layers</a></li>
      <li><a href="#adding-griddap-layers">Adding <code>griddap()</code> layers</a></li>
      <li><a href="#combining-tablesgrids">Combining tables/grids</a></li>
      <li><a href="#modifying-ggplotdap-objects">Modifying <code>ggplotdap</code> objects</a></li>
      <li><a href="#animating-plotdap-objects">Animating <code>plotdap</code> objects</a></li>
      </ul>
</li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Carson Sievert, Roy Mendelssohn.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
